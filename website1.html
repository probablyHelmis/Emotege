<html>

<head>
  <script src="https://cdn.anychart.com/releases/8.11.0/js/anychart-base.min.js" type="text/javascript"></script>
  <script src="https://cdn.anychart.com/releases/8.11.0/js/anychart-graph.min.js" type="text/javascript"></script>
  <script src="https://cdn.anychart.com/releases/8.11.0/js/anychart-ui.min.js"type="text/javascript"></script>
  
  <!-- Pasted from: https://docs.anychart.com/Quick_Start/Downloading_AnyChart
	<script src="https://cdn.anychart.com/releases/8.11.0/js/anychart-exports.min.js"></script>
	<link rel="stylesheet" href="https://cdn.anychart.com/releases/8.11.0/css/anychart-ui.min.css" /> -->
	
	<link rel="stylesheet" type="text/css" href="https://cdn.anychart.com/releases/8.11.0/css/anychart-ui.min.css?hcode=a0c21fc77e1449cc86299c5faa067dc4"/> 
	<link rel="stylesheet" type="text/css" href="https://cdn.anychart.com/releases/8.11.0/fonts/css/anychart-font.min.css"/>
</head>

<body style="background-color:#1B161E">
<div id="container", width=400%, height=400%>
<script>

//Set initial variables
var size = 0.05;
	
//import json files
//using placeholder text here
const emoteJSON = '{"emotes" : [' 
		+ '{"id": "n1", "group":"g1", "link":""},'
		+ '{"name": "n2", "group":"g2", "link":""} ]}';
var emoteArray = JSON.parse(emoteJSON);
const edgeJSON = '{"edges" : [' 
		+ '{"from": "n1", "to":"n2"} ]}';
var edgeArray = JSON.parse(edgeJSON);
	
//set up the image array
var emoteImages = {};

for (let i = 0; i < emoteArray.emotes.length; i++) {
    emoteImages[emoteArray.emotes[i].id] = new Image();
    emoteImages[emoteArray.emotes[i].id].src = emoteArray.emotes[i].link;
};
	
//initiate anychart
anychart.onDocumentLoad(function () {



	// set the data
	var nodes = []
	var edges = []

	for (let i = 0; i < emoteArray.emotes.length; i++) { 
		var newNode_ID = emoteArray.emotes[i].id;
		let newNode = {					
			id: newNode_ID,
	 		group: emoteArray.emotes[i].group,
 			width: emoteImages[newNode_ID].width * size,
			height: emoteImages[newNode_ID].height * size,
			fill: emoteImages[newNode_ID], 
			mode: "fit"};
		nodes.push(newNode);
		};
	

	for (let j = 0; j < edgeArray.edges.length; j++) {
		let newEdge = {
	 		from: edgeArray.edges[j].from,
			to: edgeArray.edges[j].to
		};
		edges.push(newEdge);
	}

	var data = {
		nodes: nodes,	
		edges: edges
	};
	
	
	// create an instance of the graph 
	var chart = anychart.graph(data);
	chart.background().fill("#1B161E");
		
		
		
		//Nodes Config
			// access nodes
				var nodes = chart.nodes();
			
			// set the size of nodes
				//nodes.normal().height(120);
				//nodes.hovered().height(160);
				//nodes.selected().height(213);

			// set the shape and fill of nodes
				nodes.normal().shape("rectangle");
				nodes.normal().fill("");
				
				//won't work but:
				//nodes.normal().width(Image(src: getData("{%image}").width);
				//nodes.normal().height(Image(src: getData("{%image}").height);
				
			// set the stroke of nodes
				nodes.normal().stroke(null);
				nodes.hovered().stroke(null);
				nodes.selected().stroke("#333333", 3);
				
			//Colours for diff groups
				var blebs = chart.group("Blebs");
				console.log(blebs)
				blebs.hovered().stroke("#FF729F", 3);
				
				var OOOO = chart.group("OOOO");
				OOOO.hovered().stroke("#E94F37", 3);
				
				var Boggies = chart.group("Boggies");
				Boggies.hovered().stroke("#607B7D", 3);
				
				var hryQt = chart.group("hryQt");
				hryQt.hovered().stroke("#F0C808", 3);
				
						//chart.group("Chatting").hovered().stroke("#3F88C5", 3);
						//chart.group("Dungeon Hunters").hovered().stroke("#CBEF43", 3);
						//chart.group("Peepos").hovered().stroke("#2E933C", 3);
						//chart.group("Vanilla Minecraft").hovered().stroke("#8D6346", 3);
		
		//Edges + Positioning
			// configure the visual settings of edges
				chart.edges().normal().stroke("#EEF0F2", 1);
				chart.edges().hovered().stroke("#EEF0F2", 4, "arrow");
				chart.edges().selected().stroke("#EEF0F2", 4);
	
		//How Labels Appear
			// enable labels of nodes
				chart.nodes().labels().enabled(true);

			// configure labels of nodes
				chart.nodes().labels().format("{%id}");
				chart.nodes().labels().fontSize(2);
				chart.nodes().labels().fontWeight(600);
	
	
	// set the iteration count (how the chart organises - default is 500)
		chart.layout().iterationCount(0);
	//magnetisation? MMMM "alignment of nodes"
		chart.interactivity().magnetize(false);
	
	// add a zoom control panel
    var zoomController = anychart.ui.zoom();
    zoomController.target(chart);
    zoomController.render();
		
	// set chart title
	chart.title("Emotege");
	//adding a legend: https://docs.anychart.com/Common_Settings/Legend/Overview
	//importing from a google sheet OOOO: https://docs.anychart.com/Working_with_Data/Data_Adapter/Loading_Google_Spreadsheet 
	// set the container element 
	chart.container("container");
		
	// initiate chart (graph) drawing
	chart.draw();
	
	
	
	}); </script>
	
	
	</div>
	hello world

</body>
</html>
